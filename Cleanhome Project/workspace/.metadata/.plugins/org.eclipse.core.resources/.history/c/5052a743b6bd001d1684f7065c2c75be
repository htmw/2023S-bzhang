(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-login-login"],{"0fb1":function(e,n,t){"use strict";t.d(n,"b",(function(){return i})),t.d(n,"c",(function(){return o})),t.d(n,"a",(function(){}));var i=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("v-uni-view",{staticClass:"login-bg"},[t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("br"),t("v-uni-view",{staticClass:"t-login"},[t("v-uni-form",{staticClass:"cl"},[t("v-uni-view",{staticClass:"t-a"},[t("v-uni-image",{attrs:{src:"http://124.71.39.108/static/images/user.png"}}),t("v-uni-input",{attrs:{type:"text",name:"phone",placeholder:"username reauired",maxlength:"11"},model:{value:e.username,callback:function(n){e.username=n},expression:"username"}})],1),t("v-uni-view",{staticClass:"t-a"},[t("v-uni-image",{attrs:{src:"http://124.71.39.108/static/images/pwd.png"}}),t("v-uni-input",{attrs:{type:"password",name:"code",maxlength:"6",placeholder:"password required"},model:{value:e.passwd,callback:function(n){e.passwd=n},expression:"passwd"}})],1),t("v-uni-button",{on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.handLogin.apply(void 0,arguments)}}},[e._v("Login")]),t("v-uni-view",{staticClass:"t-c"},[t("v-uni-text",{staticClass:"t-c-txt",on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.toReg.apply(void 0,arguments)}}},[e._v("register")]),t("v-uni-text",[e._v("to home")])],1)],1)],1)],1)},o=[]},"0fde":function(e,n,t){var i=t("f73b");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var o=t("4f06").default;o("709a24fc",i,!0,{sourceMap:!1,shadowMode:!1})},"356d":function(e,n,t){"use strict";t("7a82");var i=t("4ea4").default;Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,t("99af"),t("e9c4");var o=i(t("5530")),a=t("2798"),s=t("26cb"),c={data:function(){return{username:"",passwd:"",serverUrl:a.serverUrl}},onLoad:function(){this.username=this.userInfo&&this.userInfo.username,this.passwd=this.userInfo&&this.userInfo.passwd,this.username&&this.passwd&&this.handLogin()},methods:(0,o.default)((0,o.default)({},(0,s.mapActions)(["updateUserInfo","logout"])),{},{toReg:function(){uni.redirectTo({url:"./register"})},getUserInfos:function(e){var n=this;console.log("getsuerer--------------------------------"),uni.showLoading({title:"wechatloging..."}),uni.getUserProfile({provider:"weixin",desc:"获取User信息已获取头信息昵称",lang:"zh_CN",success:function(e){console.log(e),n.wechatLogin()},fail:function(e){console.log(e)},complete:function(e){}})},wechatLogin2:function(e){var n=this;uni.login({provider:"weixin",success:function(e){var t=e.code;n.code=t;var i="https://api.weixin.qq.com/sns/jscode2session?appid=".concat("wx2106d56eae24772e","&secret=").concat("0518f699152064d287f8c222a0619d50","&js_code=").concat(t,"&grant_type=authorization_code");uni.request({url:i,success:function(e){console.info("wechatLogin success"),console.info(JSON.stringify(e)),n.open_id=e.data.openid,n.session_key=e.data.session_key,console.info("openid:".concat(n.open_id," sesskey:").concat(n.session_key)),n.handLogin()}}),console.log(t)}})},wechatLogin:function(e){var n=this;uni.login({provider:"weixin",success:function(e){var t=e.code;uni.request({url:n.serverUrl+"wxlogin",data:{code:t},success:function(e){200==e.statusCode&&(console.info("wechatLogin success"),n.open_id=e.data.openid,n.session_key=e.data.session_key,console.info("openid:".concat(n.open_id," sesskey:").concat(n.session_key)),n.handLogin())}}),console.log(t)}})},handLogin:function(){var e=this;console.log("------------------\x3ehandLogin"),uni.showLoading({title:"loging..."}),this.open_id?(console.log("------------------\x3ehandLogin:使用openidLogin:"+this.open_id),(0,a.findj)({params:{table:"user",openid:this.open_id}}).then((function(n){uni.hideLoading(),console.log("openid find "+n),n?(console.log("openid login success "+n),e.loginSuccess(n)):(console.log("openid login add "),(0,a.savej)({params:{table:"user",openid:e.open_id,roletype:"2"}}).then((function(n){if(console.log("openid login add success "+n),n){var t={};t.id=n,t.openid=e.open_id,e.loginSuccess(t)}})).catch((function(e){uni.hideLoading()})))})).catch((function(e){uni.hideLoading()}))):(console.log("------------------\x3ehandLogin:User名密码Login:"),this.username&&this.username?(0,a.findj)({params:{table:"user",username:this.username,passwd:this.passwd}}).then((function(n){uni.hideLoading(),n?e.loginSuccess(n):uni.showToast({title:"User名密码错误!"})})).catch((function(e){console.log(e),uni.hideLoading()})):uni.showToast({icon:"none",title:"请检查输入"}))},loginSuccess:function(e){uni.hideLoading(),console.info(JSON.stringify(e)),this.updateUserInfo(e),setTimeout((function(){uni.ytool.toIndex()}),500)}}),computed:(0,o.default)({},(0,s.mapState)(["userInfo"]))};n.default=c},"832b":function(e,n,t){"use strict";t.r(n);var i=t("0fb1"),o=t("feba");for(var a in o)["default"].indexOf(a)<0&&function(e){t.d(n,e,(function(){return o[e]}))}(a);t("b9ef");var s=t("f0c5"),c=Object(s["a"])(o["default"],i["b"],i["c"],!1,null,"6387caec",null,!1,i["a"],void 0);n["default"]=c.exports},b9ef:function(e,n,t){"use strict";var i=t("0fde"),o=t.n(i);o.a},f73b:function(e,n,t){var i=t("24fb");n=i(!1),n.push([e.i,'.img-a[data-v-6387caec]{width:100%;position:absolute;bottom:0}.login-bg[data-v-6387caec]{height:100vh;padding-top:%?300?%;background-image:url(http://124.71.39.108/static/images/bg3.png)}.t-login[data-v-6387caec]{width:%?700?%;padding:%?55?%;margin:0 auto;font-size:%?28?%;background-color:#fff;border-radius:%?20?%;box-shadow:0 5px 7px 0 rgba(0,0,0,.15);z-index:9}.t-login uni-button[data-v-6387caec]{font-size:%?28?%;background:linear-gradient(90deg,#ff8f77,#fe519f);color:#fff;height:%?90?%;line-height:%?90?%;border-radius:%?50?%}.t-login uni-input[data-v-6387caec]{padding:0 %?20?% 0 %?120?%;height:%?90?%;line-height:%?90?%;margin-bottom:%?50?%;background:#f6f6f6;border:1px solid #f6f6f6;font-size:%?28?%;border-radius:%?50?%}.t-login .t-a[data-v-6387caec]{position:relative}.t-login .t-a uni-image[data-v-6387caec]{width:%?40?%;height:%?40?%;position:absolute;left:%?40?%;top:%?28?%}.t-login .t-b[data-v-6387caec]{text-align:left;font-size:%?46?%;color:#000;padding:%?300?% 0 %?120?% 0;font-weight:700}.t-login .t-d[data-v-6387caec]{text-align:center;color:#999;margin:%?80?% 0}.t-login .t-c[data-v-6387caec]{text-align:right;color:#666;margin:%?30?% %?30?% %?40?% 0}.t-login .t-c .t-c-txt[data-v-6387caec]{margin-right:%?300?%}.t-login .t-e[data-v-6387caec]{text-align:center;width:%?600?%;margin:%?40?% auto 0}.t-login .t-g[data-v-6387caec]{float:left;width:33.33%}.t-login .t-e uni-image[data-v-6387caec]{width:%?70?%;height:%?70?%}.t-login .t-f[data-v-6387caec]{text-align:center;margin:%?80?% 0 0 0;color:#999}.t-login .t-f uni-text[data-v-6387caec]{margin-left:%?20?%;color:#b9b9b9;font-size:%?27?%}.t-login .uni-input-placeholder[data-v-6387caec]{color:#aeaeae}.cl[data-v-6387caec]{zoom:1}.cl[data-v-6387caec]:after{clear:both;display:block;visibility:hidden;height:0;content:"\\20"}',""]),e.exports=n},feba:function(e,n,t){"use strict";t.r(n);var i=t("356d"),o=t.n(i);for(var a in i)["default"].indexOf(a)<0&&function(e){t.d(n,e,(function(){return i[e]}))}(a);n["default"]=o.a}}]);